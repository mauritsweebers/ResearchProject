
📘 HTML Output Protocol – v1.4 (May 2025)

This protocol governs the generation of complete, export-ready `.html` phase synthesis reports, replacing v1.3.

---

🛠 Required Files

1. ✅ `HTML_Rendering_Functions_PhaseOutput.py`
   - Contains parsing logic for headers, lists, tables, and line breaks
2. ✅ `Phase_HTML_Rendering_Pipeline.py`
   - Master renderer: loads all .txt/.csv/.svg files and injects HTML layout
3. ✅ `PhaseX_MasterSourceList.csv`
   - Used for building the "Appendix – Source References" at the end of the page

---

🧱 HTML Rendering Behavior

✅ HTML Must:
- Render using Tailwind CSS from local file `./tailwind.css`
- Wrap all content in:
  ```html
  <div class="max-w-screen-lg mx-auto px-4 py-8">
  ```

✅ Files Must Be:
- `.txt` → Parsed and formatted using structured blocks:
  - `##` → `<h3 class='text-lg font-semibold mt-6 mb-2'>`
  - `- ` → `<ul class='list-disc'>`, numbered → `<ol>`
  - `
` → `<br>`, double-newline → `<p>`
- `.csv` → First 5 rows rendered using Tailwind-styled tables
- `.svg` or `.png` → Embedded with path: `../SSOT/phaseX/moduleY/outputs/`

---

📥 Source Reference Integration

The file `PhaseX_MasterSourceList.csv` must be loaded and rendered as:
```html
<h2 class="text-2xl font-semibold mt-10 mb-4">Appendix – Source References</h2>
<ul class='list-disc list-inside pl-6 mb-8'>
  <li><strong>[Source Name]</strong> ([Type]) – <a href='[Link]' class='text-blue-600 underline'>[Link]</a></li>
</ul>
```

---

🧾 Phase Summary Block (Mandatory)

Command must inject a phase-level summary (example from Phase 0):

```html
<h2 class='text-2xl font-semibold mt-10 mb-4'>Phase 0 Summary & Implications</h2>
<ul class='list-disc list-inside pl-6 mb-4'>
  <li><strong>Global Food Production:</strong> Dominated by top staples (rice, wheat, maize).</li>
  <li><strong>Food Loss:</strong> Significant in post-harvest and consumption stages.</li>
  ...
</ul>
<p><strong>Implications for Phase 1:</strong> Nutritional modeling must reflect available production data and regional limitations.</p>
```

This is inserted **immediately before** the Appendix.

---

📄 Output Naming Convention

The `.html` file must be named:
```
PhaseX_FullSynthesis_Final_vX.X_WithSummary_FIXEDPATH.html
```
Placed in: `/OUTPUT/`

---

📌 Notes

- ❌ No `.txt` version of the synthesis is required
- ✅ All content must be renderable offline with `./tailwind.css` present
- ✅ Figures must be path-resolved using `../SSOT/...`

---

This is the authoritative rendering protocol for phase synthesis HTML. Replaces v1.3 and all earlier rendering instructions.

