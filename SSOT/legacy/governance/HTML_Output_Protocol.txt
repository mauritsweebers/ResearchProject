HTML Output Protocol â€“ Phase Report Rendering

Purpose:
Ensure that any Phase or Module chat outputs full report content in a consistent, readable, and interactive HTML format, including figures, tables, narrative text, and source references.

Scope:
Applies to any final synthesis or structured output generated from SSOT-compliant inputs across Phases and Modules.

Structure and Styling Requirements:

1. Page Layout:
   - Max-width container: Tailwind class `max-w-screen-lg mx-auto px-4 py-8`
   - Font and base: Tailwind base (`font-sans`, `text-gray-900`)

2. Theme Support:
   - Add a light/dark mode toggle button:
     - `position: fixed; top: 30px; right: 30px; z-index: 999`
     - Toggle `<html>` class between `light` and `dark`
     - Button label toggles between `dark mode` and `light mode`
   - CSS rules for `.dark` class:
     - `background-color: #1a1a1a`
     - `color: #e0e0e0`
     - Custom styles for `<th>`, `<td>`, and `<table>` elements

3. Content Rendering:
   - `<h1>` for title, `<h2>` for modules, `<h3>` for figures/tables/subsections
   - Narrative content:
     - Use `<p>` for paragraphs (split on empty lines)
     - Use `<br>` for single line breaks within a paragraph
   - Lists:
     - Bullet points (`- `) â†’ `<ul class="list-disc list-inside pl-6">`
     - Numbered lists (`1.`, `2.`) â†’ `<ol class="list-decimal list-inside pl-6">`
   - Tables:
     - Load from parsed CSV or DataFrame
     - Use Tailwind classes for layout: `min-w-full`, `border`, `px-3`, `py-2`
     - Wrap in `overflow-auto` container
   - Figures:
     - Use `<img src="./SSOT/phaseX/...">` for local image references
     - Include caption or `<p>` tag for figure metadata

4. Appendix â€“ Source References:
   - List all structured sources used in the module using:
     - `<ul class="list-disc list-inside pl-6">`
     - Each item includes name, type, and hyperlink (if available)

5. Final Output:
   - Save as `.html`
   - Naming convention: `PhaseX_FullSynthesis_WithTheme.html`
   - File should be ready for:
     - Viewing in browser
     - Print/export to PDF
     - Embedding in publication documents

Integration:
This protocol must be initialized at the start of any synthesis or HTML output process. The assistant should apply all rendering conventions automatically.---

## ðŸ”„ Updated List Parsing Logic (2024-05)

List blocks should now be parsed with enhanced detection:

1. **Bullet Lists (`- `):**
   - Any group of lines starting with `- ` are rendered as:
     ```html
     <ul class="list-disc list-inside pl-6">
       <li>...</li>
     </ul>
     ```

2. **Numbered Lists (`1.`, `1)`):**
   - Detected via regex (`^\d+[.)]\s+`)
   - Rendered as:
     ```html
     <ol class="list-decimal list-inside pl-6">
       <li>...</li>
     </ol>
     ```

3. **Sources after Lists:**
   - If a list block is followed by a line matching `(Source:...)`, it is included as a final list item:
     ```html
     <li class="text-sm italic">(Source: ...)</li>
     ```

4. **Paragraph Detection:**
   - Paragraphs are created only between blocks separated by **one or more empty lines**
   - Single newlines (`
`) are preserved within paragraphs using `<br>`

This logic improves rendering accuracy in phase synthesis outputs and ensures semantic clarity when converting `.txt` files into HTML.